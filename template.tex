% -*- TeX-engine: xetex -*-
\documentclass[10pt, a4paper, parskip=half,
               enlargefirstpage, pagenumber=no]{scrlttr2}

\usepackage[english]{babel}
\usepackage[absolute]{textpos}
\usepackage{typesetr}

%hack to accomodate headings (but no one should ever put some in a letter)
\providecommand{\section}[1]{%
\par%
#1%
}
\providecommand{\subsection}[1]{%
\par%
#1%
}
\providecommand{\subsubsection}[1]{%
\par%
#1%
}
\providecommand{\paragraph}[1]{%
\par%
#1%
}
\providecommand{\subparagraph}[1]{%
\par%
#1%
}

%use floating figures for everyting - otherwise signature will break
\let\tystrmarginfigure\tystrblockfigurenocap

%no footer on first page
\makeatletter
\@setplength{firstfootvpos}{\paperheight}

\renewcommand*{\raggedsignature}{\raggedright}
\makeatother

\begin{document}
INTERPOLATEHEAD

% Small logo - position is hardcoded, should figure out nicer way
\begin{textblock*}{3cm}(16\TPHorizModule-3cm-2cm, \useplength{firstheadvpos})
\noindent \includegraphics[width=3cm,height=3cm]{lshift-logo-blue-rgb}
\end{textblock*}


\whendefined{\tystrsubject}{\setkomavar{subject}{\tystrsubject}}

\whendefined{\tystrfromname}{\setkomavar{fromname}{\tystrfromname}}
\whendefined{\tystrfromaddress}{\setkomavar{fromaddress}{\tystrfromaddress}}
\whendefined{\tystrfromphone}{\setkomavar{fromphone}{\tystrfromphone}}
\whendefined{\tystrfromemail}{\setkomavar{fromemail}{\tystrfromemail}}
\whendefined{\tystrfromfax}{\setkomavar{fromfax}{\tystrfromfax}}
\whendefined{\tystrfromurl}{\setkomavar{fromurl}{\tystrfromurl}}
\whendefined{\tystrfrombank}{\setkomavar{frombank}{\tystrfrombank}}
\whendefined{\tystrplace}{\setkomavar{place}{\tystrplace}}
\whendefined{\tystrsignature}{\setkomavar{signature}{\tystrsignature}}

\whendefined{\tystryourref}{\setkomavar{yourref}{\tystryourref}}
\whendefined{\tystryourmail}{\setkomavar{yourmail}{\tystryourmail}}
\whendefined{\tystrmyref}{\setkomavar{myref}{\tystrmyref}}
\whendefined{\tystrdate}{\setkomavar{date}{\tystrdate}}

\begin{letter}{%
\tystrrecipient \\
\tystrrecipientaddress
}
\opening{\tystropening}
INTERPOLATEBODY
\closing{\tystrclosing}
\end{letter}

\end{document}
